################
# Functions
################

# `searchnix` is a shorthand for searching for installable packages in nixpkgs,
# see https://nixos.org/wiki/Howto_find_a_package_in_NixOS#Aliases
searchnix() {
	nix-env -qa \* -P | fgrep -i "$1";
}

################
# Sourcing files
################

# enable programmable completion features (you don't need to enable
# this, if it's already enabled in /etc/bash.bashrc and /etc/profile
# sources /etc/bash.bashrc).
if [ -f ~/.nix-profile/etc/profile.d/bash_completion.sh ]; then
    . ~/.nix-profile/etc/profile.d/bash_completion.sh
fi

# include git helpers
if [ -f /Library/Developer/CommandLineTools/usr/share/git-core/git-prompt.sh ]; then
    . /Library/Developer/CommandLineTools/usr/share/git-core/git-prompt.sh
fi
if [ -f /Library/Developer/CommandLineTools/usr/share/git-core/git-completion.bash ]; then
    . /Library/Developer/CommandLineTools/usr/share/git-core/git-completion.bash
fi

# source nix environment, if config exists
if [ -f ~/.nix-profile/etc/profile.d/nix.sh ]; then
    . ~/.nix-profile/etc/profile.d/nix.sh
fi

################
# Aliases
################

# Get macOS Software Updates, and update installed nixpkgs, and their installed packages
alias update='sudo softwareupdate -i -a; which nix-channel > /dev/null && nix-channel --update && nix-env -u --keep-going;'

################
# Exports
################
GIT_AUTHOR_NAME="Jan Wagner"
GIT_COMMITTER_NAME="$GIT_AUTHOR_NAME"
git config --global user.name "$GIT_AUTHOR_NAME"
GIT_AUTHOR_EMAIL="waja@cyconet.org"
GIT_COMMITTER_EMAIL="$GIT_AUTHOR_EMAIL"
git config --global user.email "$GIT_AUTHOR_EMAIL"

################
# Load local overwrites
################
if [ -f ~/.extra.local ]; then
    . ~/.extra.local
fi
